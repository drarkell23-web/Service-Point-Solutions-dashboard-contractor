<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ServicePoint SA â€“ Contractor HQ</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="theme-dark">
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="brand">
      <div class="brand-logo">S</div>
      <div class="brand-text">
        <div class="brand-name">ServicePoint SA</div>
        <div class="brand-sub">Contractor HQ dashboard</div>
      </div>
    </div>

    <div class="topbar-center">
      <div class="top-pill">Jobs, leads & finance in one ServicePoint hub.</div>
      <div class="top-pill top-pill-accent">Live human assistant leads</div>
    </div>

    <div class="topbar-right">
      <button id="themeToggle" class="ghost-btn">Toggle dark / light</button>
    </div>
  </header>

  <main class="layout">
    <!-- SIDEBAR NAV -->
    <aside class="sidebar">
      <nav class="nav">
        <button class="nav-item active" data-view="operations">
          <span class="nav-icon">ðŸ“Š</span>
          <span>Operations</span>
        </button>
        <button class="nav-item" data-view="jobs">
          <span class="nav-icon">ðŸ§°</span>
          <span>Jobs calendar</span>
        </button>
        <button class="nav-item" data-view="leads">
          <span class="nav-icon">ðŸ§¾</span>
          <span>Leads & clients</span>
        </button>
        <button class="nav-item" data-view="finance">
          <span class="nav-icon">ðŸ’¸</span>
          <span>Finance</span>
        </button>
        <button class="nav-item" data-view="inbox">
          <span class="nav-icon">ðŸ’¬</span>
          <span>Inbox (Admin âžœ You)</span>
        </button>
      </nav>

      <div class="sidebar-foot">
        <div class="foot-label">Account</div>
        <div class="foot-line">Contractor: <strong>ServicePoint Network</strong></div>
        <div class="foot-line">Regions: KZN Â· JHB Â· CPT</div>
        <div class="foot-line">
          Support:
          <a href="mailto:servicepoint.info@gmail.com">
            servicepoint.info@gmail.com
          </a>
        </div>
      </div>
    </aside>

    <!-- MAIN VIEWS -->
    <section class="main">

      <!-- OPERATIONS VIEW -->
      <section id="view-operations" class="view active">
        <header class="view-header">
          <h1>Operations overview</h1>
          <p>
            Live control hub for your ServicePoint jobs, leads and site teams.
          </p>
        </header>

        <!-- TOP STATS -->
        <div class="grid-3">
          <article class="stat-card">
            <div class="stat-label">New ServicePoint leads (month)</div>
            <div id="statNewLeads" class="stat-value">0</div>
            <div class="stat-foot">
              From ServicePoint SA, WhatsApp & repeat clients.
            </div>
          </article>

          <article class="stat-card">
            <div class="stat-label">Jobs booked this month</div>
            <div id="statJobsBooked" class="stat-value">0</div>
            <div class="stat-foot">
              Confirmed jobs with dates in your schedule.
            </div>
          </article>

          <article class="stat-card">
            <div class="stat-label">Quote conversion rate</div>
            <div id="statConversion" class="stat-value">0%</div>
            <div class="stat-foot">
              Jobs won vs quotes sent via ServicePoint.
            </div>
          </article>
        </div>

        <!-- PIPELINE + SNAPSHOT -->
        <section class="panel mt-lg">
          <header class="panel-header panel-header-inline">
            <div>
              <h2>Pipeline snapshot</h2>
              <p>Quick view of where your current leads are sitting.</p>
            </div>
            <div class="pipeline-legend">
              <span class="dot new"></span>New
              <span class="dot quoted"></span>Quoted
              <span class="dot booked"></span>Booked
              <span class="dot completed"></span>Completed
            </div>
          </header>

          <div class="pipeline-grid">
            <div class="pipeline-column">
              <div class="pipeline-label">New</div>
              <div id="pipeNew" class="pipeline-count">0</div>
            </div>
            <div class="pipeline-column">
              <div class="pipeline-label">Quoted</div>
              <div id="pipeQuoted" class="pipeline-count">0</div>
            </div>
            <div class="pipeline-column">
              <div class="pipeline-label">Booked</div>
              <div id="pipeBooked" class="pipeline-count">0</div>
            </div>
            <div class="pipeline-column">
              <div class="pipeline-label">Completed</div>
              <div id="pipeCompleted" class="pipeline-count">0</div>
            </div>
          </div>
        </section>

        <!-- MINI ANALYTICS -->
        <section class="panel mt-lg">
          <header class="panel-header panel-header-inline">
            <div>
              <h2>This week at a glance</h2>
              <p>Assistant + ServicePoint jobs and leads in one snapshot.</p>
            </div>
          </header>
          <div class="mini-analytics">
            <div class="mini-analytics-block">
              <div class="mini-label">Lead sources</div>
              <ul id="leadSourceBreakdown" class="mini-list"></ul>
            </div>
            <div class="mini-analytics-block">
              <div class="mini-label">Status mix</div>
              <ul id="statusBreakdown" class="mini-list"></ul>
            </div>
          </div>
        </section>
      </section>

      <!-- JOBS VIEW -->
      <section id="view-jobs" class="view">
        <header class="view-header">
          <h1>Jobs calendar</h1>
          <p>Upcoming site work pulled from your ServicePoint leads.</p>
        </header>

        <section class="panel">
          <header class="panel-header panel-header-inline">
            <div>
              <h2>Upcoming jobs</h2>
              <p>Jobs with booked dates in the next 30 days.</p>
            </div>
          </header>

          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Client</th>
                <th>Service</th>
                <th>Location</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="jobsTableBody">
              <!-- Filled by JS -->
            </tbody>
          </table>
        </section>
      </section>

      <!-- LEADS VIEW -->
      <section id="view-leads" class="view">
        <header class="view-header">
          <h1>Leads & clients</h1>
          <p>Leads routed from the ServicePoint SA platform and your assistant.</p>
        </header>

        <section class="panel">
          <header class="panel-header panel-header-inline">
            <div>
              <h2>Live leads</h2>
              <p>Tap on a lead row to see the key details.</p>
            </div>
            <button class="primary-btn" id="btnNewLead">
              + Quick ServicePoint enquiry
            </button>
          </header>

          <table class="table">
            <thead>
              <tr>
                <th>Received</th>
                <th>Client</th>
                <th>Service</th>
                <th>Channel</th>
                <th>Status</th>
                <th>Value (est.)</th>
              </tr>
            </thead>
            <tbody id="leadsTableBody">
              <!-- Filled by JS -->
            </tbody>
          </table>
        </section>
      </section>

      <!-- FINANCE VIEW -->
      <section id="view-finance" class="view">
        <header class="view-header">
          <h1>Finance overview</h1>
          <p>Month-to-date numbers from your ServicePoint jobs.</p>
        </header>

        <div class="grid-3">
          <article class="stat-card">
            <div class="stat-label">Invoiced this month</div>
            <div id="finInvoiced" class="stat-value">R0</div>
            <div class="stat-foot">Based on jobs marked as completed.</div>
          </article>
          <article class="stat-card">
            <div class="stat-label">Expected (pipeline)</div>
            <div id="finPipeline" class="stat-value">R0</div>
            <div class="stat-foot">Estimated value of quoted + booked work.</div>
          </article>
          <article class="stat-card">
            <div class="stat-label">Paid so far</div>
            <div id="finPaid" class="stat-value">R0</div>
            <div class="stat-foot">Update in your own accounting system.</div>
          </article>
        </div>

        <section class="panel mt-lg">
          <header class="panel-header">
            <h2>Simple month log</h2>
            <p>Quick reference while you run your own accounts.</p>
          </header>
          <ul class="finance-log" id="financeLog">
            <!-- Filled by JS -->
          </ul>
        </section>
      </section>

      <!-- INBOX VIEW -->
      <section id="view-inbox" class="view">
        <header class="view-header">
          <h1>Inbox â€“ messages from ServicePoint</h1>
          <p>Admin notes and human assistant updates for your jobs.</p>
        </header>

        <section class="panel inbox-panel">
          <div class="inbox-messages" id="messageList">
            <!-- Filled by JS -->
          </div>

          <form id="messageForm" class="inbox-composer">
            <label for="messageText">Reply to admin / leave internal note</label>
            <textarea
              id="messageText"
              rows="3"
              placeholder="Type your reply or note here..."
            ></textarea>
            <div class="inbox-actions">
              <button type="submit" class="primary-btn">Send to admin</button>
              <span class="inbox-hint">
                Messages here are visible to ServicePoint support and admin.
              </span>
            </div>
          </form>
        </section>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <span>Â© 2025 ServicePoint SA Â· Contractor HQ</span>
    <span>
      Want to join the network?
      Email <a href="mailto:servicepoint.info@gmail.com">servicepoint.info@gmail.com</a>
    </span>
  </footer>

  <!-- SIMPLE LEAD POPUP -->
  <div id="leadPopup" class="popup-bg">
    <div class="popup-box">
      <h3 class="popup-title">Quick ServicePoint enquiry</h3>
      <p class="popup-sub">
        Capture a new lead that came in on phone, WhatsApp or walk-in. It will
        appear in your Leads table.
      </p>

      <label class="popup-label" for="popupClientName">Client name</label>
      <input
        id="popupClientName"
        class="popup-input"
        type="text"
        placeholder="e.g. Thandi M."
      />

      <label class="popup-label" for="popupService">Service requested</label>
      <input
        id="popupService"
        class="popup-input"
        type="text"
        placeholder="e.g. Geyser replacement in Pinetown"
      />

      <label class="popup-label" for="popupValue">Estimated value (optional)</label>
      <input
        id="popupValue"
        class="popup-input"
        type="number"
        min="0"
        placeholder="e.g. 2500"
      />

      <div class="popup-row">
        <button class="btn-secondary" type="button" id="popupCancel">
          Cancel
        </button>
        <button class="btn-primary" type="button" id="popupSave">
          Save lead
        </button>
      </div>
    </div>
  </div>

  <script src="script.js" defer></script>
</body>
</html>
